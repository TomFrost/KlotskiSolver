* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; color: #e5e7eb; background: #0f172a; }

.app { display: grid; grid-template-rows: auto 1fr; height: 100vh; }
.app__header { display: flex; justify-content: space-between; align-items: center; padding: 12px 16px; border-bottom: 1px solid #374151; }
.app__header h1 { font-size: 18px; margin: 0; }
.header__actions { display: flex; gap: 8px; }
button { padding: 8px 12px; border-radius: 8px; border: 1px solid #374151; background: #1f2937; color: #e5e7eb; cursor: pointer; }
button.primary { background: #2563eb; color: white; border-color: #2563eb; }
button:disabled { opacity: 0.5; cursor: not-allowed; }

.app__content { display: grid; grid-template-columns: 280px 1fr; height: 100%; overflow: hidden; }
.sidebar { padding: 12px; border-right: 1px solid #374151; overflow: auto; height: 100%; }
.main { display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 12px; overflow: hidden; }
.board-wrapper { display: grid; place-items: center; background: #0b1220; border: 1px solid #374151; border-radius: 12px; padding: 12px; max-width: 520px; margin: 0; flex: 0 0 auto; }
.status { margin-top: 8px; min-height: 20px; font-size: 12px; color: #cbd5e1; flex: 0 0 auto; }

.panel { background: #111827; border: 1px solid #374151; border-radius: 12px; padding: 12px; margin-bottom: 12px; }
.panel h2 { margin: 0 0 8px; font-size: 14px; color: #9ca3af; }
.field { display: grid; gap: 4px; margin-bottom: 8px; }
.field label { font-size: 12px; color: #9ca3af; }
.field .row { display: grid; grid-template-columns: 1fr 1fr; gap: 6px; }
input[type="number"], input[type="text"], select { width: 100%; padding: 6px 8px; border: 1px solid #374151; border-radius: 6px; background: #0b1220; color: #e5e7eb; }
input[type="range"] { width: 100%; }
.speed-value { text-align: right; font-size: 12px; color: #9ca3af; }

.palette { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
.palette__item { display: grid; grid-template-rows: auto auto; place-items: center; padding: 12px; border: 2px dashed #374151; border-radius: 8px; background: #1f2937; cursor: grab; user-select: none; gap: 8px; }
.palette__item:active { cursor: grabbing; }
.palette__item.dragging { opacity: 0.7; }

/* Small cursor-following preview while dragging from palette */
.drag-cursor { position: fixed; pointer-events: none; z-index: 1000; opacity: 0.9; filter: drop-shadow(0 2px 6px rgba(0,0,0,0.4)); }
.drag-cursor .piece-mini { transform: scale(0.55); transform-origin: top left; }
.palette__item .label { font-weight: 600; color: #e5e7eb; font-size: 12px; }

/* Mini piece previews */
.piece-mini { position: relative; width: 80px; height: 80px; background: #0b1220; border: 1px solid #374151; border-radius: 8px; display: grid; place-items: center; }
.piece-mini__rect { border-radius: 6px; }
.piece-mini--2x2 .piece-mini__rect { width: 56px; height: 56px; background: var(--color-2x2); }
.piece-mini--2x1 .piece-mini__rect { width: 56px; height: 24px; background: var(--color-2x1); }
.piece-mini--1x2 .piece-mini__rect { width: 24px; height: 56px; background: var(--color-1x2); }
.piece-mini--1x1 .piece-mini__rect { width: 24px; height: 24px; background: var(--color-1x1); }

/* Canvas rendering theme */
:root {
  --grid-color: #334155; /* slate-700 */
  --grid-bg: #0b1220;   /* dark panel bg */
  --piece-border: #0b1220; /* keeps borders dark against light pieces */
  --selected: #10b981;
  --goal: #f59e0b;

  /* Piece colors by type (light for readability) */
  --color-2x2: #fbbf24; /* amber-400 */
  --color-2x1: #7dd3fc; /* sky-300 */
  --color-1x2: #86efac; /* green-300 */
  --color-1x1: #fda4af; /* rose-300 */
}

.board-wrapper canvas { background: var(--grid-bg); border: 1px solid #374151; border-radius: 8px; width: 320px; height: 400px; }

.help { margin: 0; padding-left: 16px; }
.help li { margin-bottom: 6px; font-size: 12px; color: #9ca3af; }
